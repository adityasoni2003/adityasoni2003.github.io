---
import "../styles/global.css";
import { ViewTransitions } from "astro:transitions";
import AnimatedBackground from "../react/AnimatedBackground";
import Header from "./Header.astro";
import FloatingMenu from "../react/FloatingMenu";
import Footer from "../components/Footer.astro";

const { title, description } = Astro.props;
---

<!DOCTYPE html>
<html lang="en" class="h-full">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- âœ… Enable View Transitions -->
    <ViewTransitions />

    <title>{title}</title>
    <meta name="description" content={description} />
    <link rel="icon" type="image/png" href="/favicon.png" />

  </head>

  <body class="relative min-h-screen min-w-screen bg-white text-zinc-900 overflow-x-hidden">

    <!-- Background -->
    <AnimatedBackground
      client:load
      light={{ lineColor: "#f0f0f0", gridSize: "6rem 4rem", glowColor: "#C9EBFF" }}
      dark={{
        dotColor: "#ffffff11",
        lineColor: "#ffffff10",
        bgColor: "#0b1226",
        dotSize: "20px"
      }}
      variant="grid-glow"
    />

    <!-- Main content -->
    <main class="min-h-screen relative">
      <Header />
      <slot />
      <FloatingMenu client:load />
    </main>

    <Footer />

  </body>

  <!-- Scroll script -->
  <script type="module">
    const attachScroll = () => {
      document.querySelectorAll(".contact-cta").forEach((btn) => {
        btn.onclick = (e) => {
          e.preventDefault();

          const section = document.getElementById("contact-me");

          if (!section) {
            window.location.href = "/#contact-me";
            return;
          }

          section.scrollIntoView({ behavior: "smooth" });
          history.replaceState(null, "", window.location.pathname);
        };
      });
    };

    document.addEventListener("astro:page-load", attachScroll);
  </script>

</html>
