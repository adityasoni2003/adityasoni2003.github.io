---
import BaseLayout from "../layouts/Layout.astro";
import Hero from "../react/Hero";
import FeaturedBlogs from "../components/FeaturedBlogs.astro";
import FeaturedProjects from "../components/FeaturedProjects.astro";

import type { Blog } from "../lib/types";
import type { Project } from "../lib/types";
import SkillsSection from "../components/SkillsSection.astro";
import SkillsBanner from "../react/SkillsBanner";
import AboutMe from "../components/AboutMe.astro";
import { sanity } from "../lib/sanity";
import imageUrlBuilder from "@sanity/image-url";

const builder = imageUrlBuilder(sanity);
const urlFor = (source: any) => builder.image(source).url();

const blogs = await sanity.fetch(`
  *[_type == "blog" && featured == true]
  | order(date desc) {
    title,
    description,
    url,
    topic,
    date,
    thumbnail
  }
`);

const featuredBlogs = blogs.map((blog: Blog) => ({
  ...blog,
  thumbnail: blog.thumbnail ? urlFor(blog.thumbnail) : ""
}));

const featuredProjects : Project[] = [
    {
      title: "Survey Analytics Platform",
      description:
        "An end-to-end survey creation and analytics platform used by market research teams.",
      liveUrl: "https://survey-platform.live",
      githubUrl: "https://github.com/adityasoni/survey-platform",
      thumbnail:
        "https://images.unsplash.com/photo-1551288049-bebda4e38f71",
      date: "12/12/2024",
    },
    {
      title: "DSA Practice Tracker",
      description:
        "A web app to track DSA problems, patterns, and revision cycles with smart filtering.",
      liveUrl: "https://dsa-tracker.app",
      thumbnail:
        "https://images.unsplash.com/photo-1509228627159-6452c3b52c26",
      date: "20/10/2024",
    },
    {
      title: "Portfolio CMS",
      description:
        "A lightweight CMS built in React to manage blogs and case studies for static websites.",
      liveUrl: "https://portfolio-cms.dev",
      githubUrl: "https://github.com/adityasoni/portfolio-cms",
      thumbnail:
        "https://images.unsplash.com/photo-1517248135467-4c7edcad34c4",
      date: "03/08/2024",
    },
  ];
export const skills: string[] = [
  "React.js",
  "Next.js",
  "Astro",
  "TypeScript",
  "JavaScript",

  "MongoDB",
  "PostgreSQL",
  "Redis",
  "MySQL",
  "Firebase",

  "Generative AI",
  "Tool-calling Agents",

  "Node.js",
  "Express.js",
  "RESTful APIs",
  "Mongoose",
  "GraphQL APIs",
  "Service Layer Architecture",
  "Go",

  "Redux",
  "TanStack Query",
  "React Hook Form",
  "Zod",

  "Code Splitting",
  "Bundle Analysis",
  "Caching",
  "Progressive Loading",

  "Tailwind CSS",
  "ANT Design",
  "SCSS",
  "Styled Components",

  "Docker",
  "Linux",
  "CI/CD",

  "Socket.io",
  "WebRTC",
  "WebSockets",
];

---

<BaseLayout title="Aditya Soni - Software Engineer">
  <Hero client:load/>
  <AboutMe/>
  <SkillsBanner skills={skills} client:load/>
  <SkillsSection/>
  <FeaturedProjects projects={featuredProjects} />
  <FeaturedBlogs blogs={featuredBlogs}/>
</BaseLayout>
